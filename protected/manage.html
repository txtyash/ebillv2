<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Manage Your Account</title>
  <!-- Import js and css for bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- add cdn link for rufina google font -->
  <link href="https://fonts.googleapis.com/css2?family=Rufina:wght@700&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <link href="../styles.css" rel="stylesheet" />
  <script type="module">
    import { Validation } from "../src/helpers/validators";
    const appState = JSON.parse(localStorage.getItem("appState"));
    // check the loggedIn field on the appState from local storage and if the user is not logged in then redirect to login page
    if (appState.user.name && appState.loggedIn) {
      document.querySelector(
        ".logged-in-as"
      ).textContent = `Logged in as ${appState.user.name}`;
    } else if (!appState.loggedIn) {
      window.location.href = "/login.html";
    }
  </script>
  <style>
    .card {
      transition: transform 0.3s;
      display: flex;
      align-items: center;
    }

    .card-icon {
      font-size: 3rem;
      margin-right: 1rem;
      color: dimgray;
      transition: color 0.3s;
    }

    .card:hover .card-icon {
      color: blue;
    }

    .card-title {
      color: #333;
    }
  </style>
</head>

<body>
  <nav class="px-3 navbar navbar-expand navbar-dark bg-dark sticky-top justify-content-between">
    <!-- Title and tagline -->
    <div class="d-flex align-items-center">
      <a class="navbar-brand fancy-text" href="/">
        Mahavitaran<i class="ml-2 fa-brands fa-slack"></i>
      </a>
      <!-- apply bootstrap class to display this after small breakpoint -->
      <p class="d-none d-md-block text-nowrap my-auto" style="color: gainsboro">
        Effortless Electricity Billing
      </p>
    </div>

    <!-- Links -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" href="manage.html">
          Manage
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <!-- Different view if logged in or logged out -->
      <li class="nav-item register-login-logout">
        <a class="nav-link" href="../register.html">
          Register
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <li class="">
        <a class="nav-link" href="notifications.html">
          <i class="bi bi-bell"></i>
          <span class="sr-only">(current)</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="container my-3">
    <h2 class="text-center my-2">Manage Your Account</h2>
    <div class="w-100 d-flex justify-content-center my-3">
      <small class="logged-in-as"></small>
    </div>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <div class="col d-none admin-console">
        <a href="../admin/index.html" class="text-decoration-none">
          <div class="card d-flex flex-row d-flex">
            <i class="bi bi-person-circle card-icon"></i>
            <div class="">
              <h5 class="card-title">Admin Console</h5>
              <p class="card-text">
                Access and manage administrative settings.
              </p>
            </div>
          </div>
        </a>
      </div>
      <div class="col">
        <a href="personal-info.html" class="text-decoration-none">
          <div class="card d-flex flex-row">
            <i class="bi bi-info-circle card-icon"></i>
            <div>
              <h5 class="card-title">Personal Info</h5>
              <p class="card-text">
                Edit your personal details and preferences.
              </p>
            </div>
          </div>
        </a>
      </div>
      <div class="col">
        <a href="bills.html" class="text-decoration-none">
          <div class="card d-flex flex-row">
            <i class="bi bi-receipt card-icon"></i>
            <div>
              <h5 class="card-title">Your Bills</h5>
              <p class="card-text">
                View and manage your billing information.
              </p>
            </div>
          </div>
        </a>
      </div>
      <div class="col">
        <a href="power-connections.html" class="text-decoration-none">
          <div class="card d-flex flex-row">
            <i class="bi bi-lightning card-icon"></i>
            <div>
              <h5 class="card-title">Your Power Connections</h5>
              <p class="card-text">Manage your power connections.</p>
            </div>
          </div>
        </a>
      </div>
      <div class="col">
        <a href="feedback.html" class="text-decoration-none">
          <div class="card d-flex flex-row">
            <i class="bi bi-chat-dots card-icon"></i>
            <div>
              <h5 class="card-title">Your Valuable Feedback</h5>
              <p class="card-text">Provide feedback to help us improve.</p>
            </div>
          </div>
        </a>
      </div>
      <div class="col">
        <a href="complaints.html" class="text-decoration-none">
          <div class="card d-flex flex-row">
            <i class="bi bi-exclamation-circle card-icon"></i>
            <div>
              <h5 class="card-title">Any Complaints?</h5>
              <p class="card-text">Report any issues or concerns.</p>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
  <script>
    // check the loggedIn field on the appState from local storage and if the user is logged in then show logout instead of register
    if (
      localStorage.getItem("appState") &&
      JSON.parse(localStorage.getItem("appState")).loggedIn
    ) {
      document.querySelector(".register-login-logout").innerHTML = `
          <a class="nav-link" href="logout.html">
            Logout
            <span class="sr-only">(current)</span>
          </a>
        `;
    }

    // check the role field of appState from local storage if it is admin then show the admin console card
    if (
      localStorage.getItem("appState") &&
      JSON.parse(localStorage.getItem("appState")).role === "admin"
    ) {
      document.querySelector(".admin-console").classList.remove("d-none");
    }
  </script>
</body>

</html>